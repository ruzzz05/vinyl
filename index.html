<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VINILOS</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: gray;
      margin: 0;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: white;
    }

    #search, #tag-filter {
      margin: 10px auto 20px;
      padding: 10px;
      width: 100%;
      max-width: 300px;
      font-size: 16px;
      border-radius: 5px;
      border: 1px solid #ccc;
      display: block;
    }

    #random-btn {
      display: block;
      margin: 0 auto 20px;
      padding: 10px 20px;
      font-size: 16px;
      background: #222;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #random-btn:hover {
      background: #444;
    }

    .artist {
      width: 300px;
      background: #9b9796;
      border-radius: 5px;
      padding: 15px;
      margin-bottom: 20px;
      box-sizing: border-box;
    }

    .artist-name {
      font-weight: bold;
      margin-bottom: 10px;
    }

    .album {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }

    .album img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 5px;
      cursor: pointer;
    }

    /* MODAL */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.7);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: #9b9796;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      max-width: 300px;
    }

    .modal-content img {
      width: 200px;
      border-radius: 8px;
      margin-top: 10px;
    }

    .close {
      float: right;
      font-size: 22px;
      cursor: pointer;
    }



    #artists-wrapper {
      display: flex;
      justify-content: center;
    }

    #artists {
      width: auto;
    }
  </style>

  <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
</head>

<body>

<h1>Artistas y lbumes</h1>

<input id="search" type="text" placeholder="Buscar artista o 谩lbum..." />
<select id="tag-filter">
  <option value="">Filtrar por estilo...</option>
</select>

<button id="random-btn"> Disco Random</button>

<div id="artists-wrapper">
  <div id="artists"></div>
</div>

<!-- MODAL -->
<div id="random-modal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2 id="random-title"></h2>
    <p id="random-artist"></p>
    <a id="random-link" target="_blank">
      <img id="random-image">
    </a>
  </div>
</div>

<script>
const data = {
      "C. Tangana": [
        { name: "Avida Dollars", image: "img/dollars.jpg", tags: ["rap"], url: "https://open.spotify.com/album/7Dl3kd377FvNAEVHHOMSTM?si=cFDrlHX7TQ6fKeVtiIr-dg" },
        { name: "El Madrile帽o", image: "img/mad.jpeg", tags: ["fusi贸n", "flamenco"], url: "https://open.spotify.com/album/52QyC9nSbgtHFXyQRHsXJ9?si=NcbMIrJzTcWSAqImcDSruQ" }
      ],
      "CBS Power All Stars": [ 
        { name: "All Stars (The Album)", image: "img/stars.jpg", tags: ["rock", "pop"], url: ""}
      ],
      "Cheap Trick": [
        { name: "Standing on the Edge", image: "img/trick.jpg", tags: ["rock", "power pop"], url: "https://open.spotify.com/album/2rzIBsrappXePwoyFcBtI6?si=ciAFDWk2Q5SEu72grDhdQg" }
      ],
      "Choclock": [
        { name: "Dalt贸nico pero me siento Azul", image: "img/dalton.jpeg", tags: ["r&b"], url: "https://open.spotify.com/album/2GS4OCw6wd47mu7OFdzWFH?si=haHGo6mpSDGvoteUFQ63tQ" }
      ],
      "Cruz Cafun茅": [
        { name: "Blus", image: "img/azul.jpg", tags: ["trap"], url: "https://open.spotify.com/album/4cdd2jx9GScUzDETwJ6GEk?si=tZZmB9rETieP-sSn2EiECg" },
        { name: "Me Muevo Con Dios", image: "img/MMCD.png", tags: ["rap", "r&b"], url: "https://open.spotify.com/album/7yvmtCjHcBe9DqIVl7AwQT?si=BAss2UN2TweO1nm94DlFlQ" },
        { name: "Visi贸n T煤nel", image: "img/tunel.jpeg", tags: ["trap"], url: "https://open.spotify.com/album/4DM8p5oOEbrBM5xzoO6qYU?si=v_adN3JlRmOMUrwPiBmc4g" }
      ],
      "Dano": [
        { name: "Nuevos Trapos", image: "img/trapos.jpeg", tags: ["rap"], url: "https://open.spotify.com/album/05QwR4mSOlpHbtYFAOcB4f?si=ioYz7V1mTcyOLSoKBAJqXg" }
      ],
      "Dellafuente": [
        { name: "Ansia Viva", image: "img/ansia.jpg", tags: ["trap", "flamenco"], url: "https://open.spotify.com/album/03a68tDUXs4dX7nVcVfJAn?si=56CIT1zVR6et29JT82wtpQ" },
        { name: "Azulejos de Corales", image: "img/corales.jpg", tags: ["flamenco", "experimental", "fusi贸n"], url: "https://open.spotify.com/album/4q1iG9Jub9KRC25vZ0f6y4?si=8CzGPTqiRvK1UV_23MQmNA" },
        { name: "Torii Yama", image: "img/yama.jpg", tags: ["trap"], url: "https://open.spotify.com/album/6zSKkBQfQs3B9YncN3SGyI?si=lvqw3dcXQD6YTAv6J0EAHQ" },
        { name: "Lagrimas pa otro dia", image: "img/lagrimas.jpg", tags: ["flamenco"], url: "https://open.spotify.com/album/3cPRpK8yUQV5T6QTt7XGfp?si=Iccqtrc4QC6_YJE1aFPGyg" }

      ],
      "Diego900": [
        { name: "La Espalda Del Sol", image: "img/espalda.jpeg", tags: ["rap"], url: "https://open.spotify.com/album/0EMwFzMU6W8VlWVy6NKPUu?si=hCBaZcdGREGk2pUhbpJRmA" }
      ],
      "Eladio Carri贸n": [
        { name: "DON KBRON", image: "img/kbron.jpeg", tags: ["trap"], url: "https://open.spotify.com/album/77WXheyyYBkqqz6Q19l37a?si=LZGEvDmVTsuwGQeiY__IxA" }
      ],
      "Elio Toffana": [
        { name: "Shock Wave", image: "img/wave.jpg", tags: ["rap"], url: "https://open.spotify.com/album/17D4dmW8j9e7UD301XGz0m?si=v5BXpuOER7eIv0_cakd3gw" }
      ],
      "Enry-K": [
        { name: "DOT.", image: "img/dot.jpg", tags: ["trap"], url: "https://open.spotify.com/album/3jEhw84FzMpeLncX7cy6OF?si=1fJ6op5URSmorp3AiyI5mA" },
        { name: "Luz Rosa", image: "img/rosa.jpeg", tags: ["pop", "trap"], url: "https://open.spotify.com/album/7LzrBmi5dTqST3lPfeKbDP?si=1-FlqUOoRbKVairV-v6f0g" }
      ],
      "Extremoduro": [
        { name: "Canciones Prohibidas", image: "img/canciones.jpeg", tags: ["rock"], url: "https://open.spotify.com/album/5QHJB2blBbAL8BjrD9hrhG?si=nx3hiW7KRPayQwYTRjxvyg" }
      ],
      "Judelline": [
        { name: "Bodhiria", image: "img/bodhiria.jpg", tags: ["r&b"], url: "https://open.spotify.com/album/3fVXh36WypsZR2JGathvkq?si=M44OjmVxQv27K-Qd7xa0KQ" }
      ],
      "Juicy Bae": [
        { name: "Antes De Conocerte", image: "img/antes.jpg", tags: ["trap", "r&b"], url: "https://open.spotify.com/album/3m6TsytKnxFmghjbFWLraO?si=8YomnAwGRcK0K0AskrzbZQ" },
        { name: "El Secreto", image: "img/secreto.jpg", tags: ["r&b"], url: "https://open.spotify.com/album/4NJFWpVWPgPvrciytpxOvr?si=YSbugIWzRnSPbjfmU1zhJA" },
        { name: "PTSD", image: "img/ptsd.jpg", tags: ["trap"], url: "https://open.spotify.com/album/3uCDoXLQZnDAck1R6Y0Tuk?si=_7vlINIhS4SQzPp7hYkWfQ" }
      ],
      "La Casa Azul": [
        { name: "La Gran Esfera", image: "img/esfera.jpg", tags: ["pop", "indie", "electr贸nica"], url: "https://open.spotify.com/album/5f1cJH6cg1uxKKkQDPOfvh?si=7cGnqWHrTZ6rntiWZ0boeQ" }
      ],
      "Mahavishnu Orchestra": [
        { name: "Birds of Fire", image: "img/birds.jpg", tags: ["jazz"], url: "https://open.spotify.com/album/6SLknspfGod3v3TyWawl8J?si=KGePL-eWQEWWOXS5r845XA" }
      ],
      "Miles Davis": [
        { name: "Sorcerer", image: "img/davis.jpg", tags: ["jazz"], url: "https://open.spotify.com/album/4ONkvBCQrd2A8qJ5Cw6FYo?si=GmRbKHt2TKqskTfhm9cAAw" }
      ],
      "Quevedo": [
        { name: "Buenas Noches", image: "img/noches.jpg", tags: ["reggaet贸n"], url: "https://open.spotify.com/album/3V2ApPxUSquOkjLQU3wmjh?si=3X4Knt8sQoW0twly0X0bRw" }
      ],
      "Raul Clyde": [
        { name: "Destino 2014", image: "img/destino.jpeg", tags: ["reggaet贸n"], url: "https://open.spotify.com/album/5KvIYKPV17rdUz4ZrTz7Qx?si=0bMFjSuJQHmJX4zgJIk2Jg" }
      ],
      "Recycled J": [
        { name: "Casanova", image: "img/casanova.jpg", tags: ["pop"], url: "https://open.spotify.com/album/4Vu2ERMwmGhJ3oOJrr9nfB?si=d7Tuy1_ETX2NHA7Tl5Yt9Q" },
        { name: "Preludio", image: "img/pre.jpg", tags: ["rap"], url: "https://open.spotify.com/album/3bwtp40wXMy9dWWlNDgL4u?si=6Cp_ZPVpRLOgtf9RotJz8g" },
        { name: "San Jorge", image: "img/jorge.jpeg", tags: ["rap", "trap", "pop"], url: "https://open.spotify.com/album/5SMgH661iAfJixb3gVRtH5?si=3iIY5wHdSKmxKRTdnpr7uQ" }
      ],
      "Rels B": [
        { name: "A New Star (1993)", image: "img/star.jpeg", tags: ["pop"], url: "https://open.spotify.com/album/6MxVqDR6nACRxGSePfK9y4?si=5QjqYzytQTm7PQAKBqOuHA" }
      ],
      "Rosalia": [
        { name: "El Mal Querer", image: "img/querer.jpg", tags: ["flamenco", "fusi贸n"], url: "https://open.spotify.com/album/355bjCHzRJztCzaG5Za4gq?si=SzM_b0h0SY-htmVNgOHq5A" },
        { name: "Motomami", image: "img/moto.jpg", tags: ["pop", "experimental"], url: "https://open.spotify.com/album/6jbtHi5R0jMXoliU2OS0lo?si=Bt0fzNnIR-i1JsGJtcDjuw" }
      ],
      "Sen Senra": [
        { name: "Sensaciones", image: "img/sens.jpg", tags: ["pop"], url: "https://open.spotify.com/album/7Hr8FOf7NQIe7UhLcllXq9?si=UkE2zZRsQ9qP_4bSPV5lNg" }
      ],
      "SZA": [
        { name: "Ctrl", image: "img/ctrl.jpg", tags: ["r&b"], url: "https://open.spotify.com/album/76290XdXVF9rPzGdNRWdCh?si=kFfr8PbpSi6A9rxDhreTxw" },
        { name: "SOS", image: "img/sos.png", tags: ["r&b"], url: "https://open.spotify.com/album/07w0rG5TETcyihsEIZR3qG?si=Q0xUpc6CSO2qRVGDpI45tg" }
      ],
      "Taifa Yallah": [
        { name: "Causa", image: "img/causa.jpg", tags: ["rap"], url: "https://open.spotify.com/album/5GyDhDfK24MhsOH1bX8gdW?si=dERDC1zRTMKnuStBj07X8A" }
      ],
      "The Weeknd": [
        { name: "Starboy", image: "img/starboy.jpg", tags: ["pop", "r&b"], url: "https://open.spotify.com/album/2ODvWsOgouMbaA5xf0RkJe?si=9Yge93NSQvC1MfDVAkb0kA" }
      ],
      "Los Grandes del Jazz": [
        { name: "Grandes del Jazz Vol. 6", image: "img/grandes.jpg", tags: ["jazz"], url: "" }
      ]
    };  
</script>

<script>
const searchInput = document.getElementById('search');
const tagFilter = document.getElementById('tag-filter');
const artistsDiv = document.getElementById('artists');

let masonry;

function initMasonry() {
  if (masonry) masonry.destroy();
  masonry = new Masonry('#artists', {
    itemSelector: '.artist',
    columnWidth: 300,
    gutter: 20,
    fitWidth: true
  });
}

function getAllTags() {
  const tags = new Set();
  Object.values(data).forEach(albums =>
    albums.forEach(a => a.tags.forEach(t => tags.add(t)))
  );
  return [...tags].sort();
}

function populateTagFilter() {
  getAllTags().forEach(tag => {
    const option = document.createElement('option');
    option.value = tag;
    option.textContent = tag;
    tagFilter.appendChild(option);
  });
}

function displayArtists(artists) {
  artistsDiv.innerHTML = '';

  for (const artist in artists) {
    const artistDiv = document.createElement('div');
    artistDiv.className = 'artist';

    artistDiv.innerHTML = `<div class="artist-name">${artist}</div>`;

    artists[artist].forEach(album => {
      artistDiv.innerHTML += `
        <div class="album">
          <a href="${album.url}" target="_blank">
            <img src="${album.image}">
          </a>
          <span>${album.name}</span>
        </div>`;
    });

    artistsDiv.appendChild(artistDiv);
  }

  setTimeout(initMasonry, 100);
}

function searchAndFilterArtists() {
  const q = searchInput.value.toLowerCase();
  const tag = tagFilter.value;
  const result = {};

  for (const artist in data) {
    const albums = data[artist].filter(a =>
      (artist.toLowerCase().includes(q) || a.name.toLowerCase().includes(q)) &&
      (!tag || a.tags.includes(tag))
    );
    if (albums.length) result[artist] = albums;
  }

  displayArtists(result);
}

searchInput.addEventListener('input', searchAndFilterArtists);
tagFilter.addEventListener('change', searchAndFilterArtists);

/* DISCO RANDOM */
const modal = document.getElementById('random-modal');
const closeBtn = document.querySelector('.close');

document.getElementById('random-btn').onclick = () => {
  const allAlbums = [];
  for (const artist in data) {
    data[artist].forEach(album => allAlbums.push({ ...album, artist }));
  }

  const random = allAlbums[Math.floor(Math.random() * allAlbums.length)];

  document.getElementById('random-title').textContent = random.name;
  document.getElementById('random-artist').textContent = random.artist;
  document.getElementById('random-image').src = random.image;
  document.getElementById('random-link').href = random.url || "#";

  modal.style.display = 'flex';
};

closeBtn.onclick = () => modal.style.display = 'none';
window.onclick = e => { if (e.target === modal) modal.style.display = 'none'; };

populateTagFilter();
displayArtists(data);
</script>

</body>
</html>
