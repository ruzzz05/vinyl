<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VINILOS</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: gray;
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      color: white;
    }
    #search, #tag-filter {
      margin: 10px auto 20px;
      padding: 10px;
      width: 100%;
      max-width: 300px;
      font-size: 16px;
      border: 1px solid #ccc;
      border-radius: 5px;
      display: block;
    }
    #artists {
      margin: 0 auto;
    }
    .artist {
      width: 300px;
      background: #9b9796;
      border-radius: 5px;
      padding: 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      box-sizing: border-box;
    }
    .artist-name {
      font-weight: bold;
      margin-bottom: 10px;
      font-size: 1.1em;
    }
    .album {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
    }
    .album img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>

  <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
</head>
<body>

  <h1>Artistas y Álbumes</h1>
  <input type="text" id="search" placeholder="Buscar artista o álbum..." />
  <select id="tag-filter">
    <option value="">Filtrar por estilo...</option>
  </select>
  <div id="artists"></div>

  <script>
    const data = {
      "C. Tangana": [
        { name: "Avida Dollars", image: "img/dollars.jpg", tags: ["rap"], url: "https://open.spotify.com/album/7Dl3kd377FvNAEVHHOMSTM?si=cFDrlHX7TQ6fKeVtiIr-dg" },
        { name: "El Madrileño", image: "img/mad.jpeg", tags: ["fusión", "flamenco"], url: "https://open.spotify.com/album/52QyC9nSbgtHFXyQRHsXJ9?si=NcbMIrJzTcWSAqImcDSruQ" }
      ],
      "Choclock": [
        { name: "Daltónico pero me siento Azul", image: "img/dalton.jpeg", tags: ["r&b"], url: "https://open.spotify.com/album/2GS4OCw6wd47mu7OFdzWFH?si=haHGo6mpSDGvoteUFQ63tQ" }
      ],
      "Cruz Cafuné": [
        { name: "Blu€s", image: "img/azul.jpg", tags: ["trap"], url: "https://open.spotify.com/album/4cdd2jx9GScUzDETwJ6GEk?si=tZZmB9rETieP-sSn2EiECg" },
        { name: "Me Muevo Con Dios", image: "img/MMCD.png", tags: ["rap"], url: "https://open.spotify.com/album/7yvmtCjHcBe9DqIVl7AwQT?si=BAss2UN2TweO1nm94DlFlQ" }
      ],
      "Dano": [
        { name: "Nuevos Trapos", image: "img/trapos.jpeg", tags: ["rap"], url: "https://open.spotify.com/album/05QwR4mSOlpHbtYFAOcB4f?si=ioYz7V1mTcyOLSoKBAJqXg" }
      ],
      "Dellafuente": [
        { name: "Ansia Viva", image: "img/ansia.jpg", tags: ["trap", "flamenco"], url: "https://open.spotify.com/album/03a68tDUXs4dX7nVcVfJAn?si=56CIT1zVR6et29JT82wtpQ" },
        { name: "Torii Yama", image: "img/yama.jpg", tags: ["trap"], url: "https://open.spotify.com/album/6zSKkBQfQs3B9YncN3SGyI?si=lvqw3dcXQD6YTAv6J0EAHQ" },
        { name: "Lagrimas pa otro dia", image: "img/lagrimas.jpg", tags: ["flamenco"], url: "https://open.spotify.com/album/3cPRpK8yUQV5T6QTt7XGfp?si=Iccqtrc4QC6_YJE1aFPGyg" }
      ],
      "Diego900": [
        { name: "La Espalda Del Sol", image: "img/espalda.jpeg", tags: ["rap"], url: "https://open.spotify.com/album/0EMwFzMU6W8VlWVy6NKPUu?si=hCBaZcdGREGk2pUhbpJRmA" }
      ],
      "Eladio Carrión": [
        { name: "DON KBRON", image: "img/kbron.jpeg", tags: ["trap"], url: "https://open.spotify.com/album/77WXheyyYBkqqz6Q19l37a?si=LZGEvDmVTsuwGQeiY__IxA" }
      ],
      "Elio Toffana": [
        { name: "Shock Wave", image: "img/wave.jpg", tags: ["rap"], url: "https://open.spotify.com/album/17D4dmW8j9e7UD301XGz0m?si=v5BXpuOER7eIv0_cakd3gw" }
      ],
      "Enry-K": [
        { name: "DOT.", image: "img/dot.jpg", tags: ["trap"], url: "https://open.spotify.com/album/3jEhw84FzMpeLncX7cy6OF?si=1fJ6op5URSmorp3AiyI5mA" },
        { name: "Luz Rosa", image: "img/rosa.jpeg", tags: ["pop", "trap"], url: "https://open.spotify.com/album/7LzrBmi5dTqST3lPfeKbDP?si=1-FlqUOoRbKVairV-v6f0g" }
      ],
      "Extremoduro": [
        { name: "Canciones Prohibidas", image: "img/canciones.jpeg", tags: ["rock"], url: "https://open.spotify.com/album/5QHJB2blBbAL8BjrD9hrhG?si=nx3hiW7KRPayQwYTRjxvyg" }
      ],
      "Judelline": [
        { name: "Bodhiria", image: "img/bodhiria.jpg", tags: ["r&b"], url: "https://open.spotify.com/album/3fVXh36WypsZR2JGathvkq?si=M44OjmVxQv27K-Qd7xa0KQ" }
      ],
      "Juicy Bae": [
        { name: "Antes De Conocerte", image: "img/antes.jpg", tags: ["trap", "r&b"], url: "https://open.spotify.com/album/3m6TsytKnxFmghjbFWLraO?si=8YomnAwGRcK0K0AskrzbZQ" },
        { name: "El Secreto", image: "img/secreto.jpg", tags: ["r&b"], url: "https://open.spotify.com/album/4NJFWpVWPgPvrciytpxOvr?si=YSbugIWzRnSPbjfmU1zhJA" },
        { name: "PTSD", image: "img/ptsd.jpg", tags: ["trap"], url: "https://open.spotify.com/album/3uCDoXLQZnDAck1R6Y0Tuk?si=_7vlINIhS4SQzPp7hYkWfQ" }
      ],
      "Quevedo": [
        { name: "Buenas Noches", image: "img/noches.jpg", tags: ["reggaetón"], url: "https://open.spotify.com/album/3V2ApPxUSquOkjLQU3wmjh?si=3X4Knt8sQoW0twly0X0bRw" }
      ],
      "Raul Clyde": [
        { name: "Destino 2014", image: "img/destino.jpeg", tags: ["reggaetón"], url: "https://open.spotify.com/album/5KvIYKPV17rdUz4ZrTz7Qx?si=0bMFjSuJQHmJX4zgJIk2Jg" }
      ],
      "Recycled J": [
        { name: "Casanova", image: "img/casanova.jpg", tags: ["pop"], url: "https://open.spotify.com/album/4Vu2ERMwmGhJ3oOJrr9nfB?si=d7Tuy1_ETX2NHA7Tl5Yt9Q" },
        { name: "Preludio", image: "img/pre.jpg", tags: ["rap"], url: "https://open.spotify.com/album/3bwtp40wXMy9dWWlNDgL4u?si=6Cp_ZPVpRLOgtf9RotJz8g" }
      ],
      "Rels B": [
        { name: "A New Star (1993)", image: "img/star.jpeg", tags: ["pop"], url: "https://open.spotify.com/album/6MxVqDR6nACRxGSePfK9y4?si=5QjqYzytQTm7PQAKBqOuHA" }
      ],
      "Rosalia": [
        { name: "El Mal Querer", image: "img/querer.jpg", tags: ["flamenco", "fusión"], url: "https://open.spotify.com/album/355bjCHzRJztCzaG5Za4gq?si=SzM_b0h0SY-htmVNgOHq5A" },
        { name: "Motomami", image: "img/moto.jpg", tags: ["pop", "experimental"], url: "https://open.spotify.com/album/6jbtHi5R0jMXoliU2OS0lo?si=Bt0fzNnIR-i1JsGJtcDjuw" }
      ],
      "Sen Senra": [
        { name: "Sensaciones", image: "img/sens.jpg", tags: ["pop"], url: "https://open.spotify.com/album/7Hr8FOf7NQIe7UhLcllXq9?si=UkE2zZRsQ9qP_4bSPV5lNg" }
      ],
      "SZA": [
        { name: "Ctrl", image: "img/ctrl.jpg", tags: ["r&b"], url: "https://open.spotify.com/album/76290XdXVF9rPzGdNRWdCh?si=kFfr8PbpSi6A9rxDhreTxw" }
      ],
      "Taifa Yallah": [
        { name: "Causa", image: "img/causa.jpg", tags: ["rap"], url: "https://open.spotify.com/album/5GyDhDfK24MhsOH1bX8gdW?si=dERDC1zRTMKnuStBj07X8A" }
      ],
      "The Weeknd": [
        { name: "Starboy", image: "img/starboy.jpg", tags: ["pop", "r&b"], url: "https://open.spotify.com/album/2ODvWsOgouMbaA5xf0RkJe?si=9Yge93NSQvC1MfDVAkb0kA" }
      ]
    };

    let masonry;

    function initMasonry() {
      if (masonry) masonry.destroy();
      masonry = new Masonry('#artists', {
        itemSelector: '.artist',
        columnWidth: 300,
        gutter: 20,
        fitWidth: true
      });
    }

    function getAllTags() {
      const tagsSet = new Set();
      for (const albums of Object.values(data)) {
        albums.forEach(album => album.tags.forEach(tag => tagsSet.add(tag)));
      }
      return Array.from(tagsSet).sort();
    }

    function populateTagFilter() {
      const select = document.getElementById('tag-filter');
      getAllTags().forEach(tag => {
        const option = document.createElement('option');
        option.value = tag;
        option.textContent = tag;
        select.appendChild(option);
      });
    }

    function displayArtists(artists) {
      const artistsDiv = document.getElementById('artists');
      artistsDiv.innerHTML = '';

      for (const artist in artists) {
        const artistDiv = document.createElement('div');
        artistDiv.className = 'artist';

        const nameDiv = document.createElement('div');
        nameDiv.className = 'artist-name';
        nameDiv.textContent = artist;
        artistDiv.appendChild(nameDiv);

        artists[artist].forEach(album => {
          const albumDiv = document.createElement('div');
          albumDiv.className = 'album';
          albumDiv.innerHTML = `
            <a href="${album.url}" target="_blank">
              <img src="${album.image}" alt="${album.name}">
            </a>
            <span>${album.name}</span>
          `;
          artistDiv.appendChild(albumDiv);
        });

        artistsDiv.appendChild(artistDiv);
      }

      setTimeout(initMasonry, 100);
    }

    function searchAndFilterArtists() {
      const query = document.getElementById('search').value.toLowerCase();
      const selectedTag = document.getElementById('tag-filter').value;
      const filteredArtists = {};

      for (const artist in data) {
        const albums = data[artist].filter(album => {
          const matchesQuery =
            artist.toLowerCase().includes(query) ||
            album.name.toLowerCase().includes(query);
          const matchesTag = !selectedTag || album.tags.includes(selectedTag);
          return matchesQuery && matchesTag;
        });

        if (albums.length > 0) {
          filteredArtists[artist] = albums;
        }
      }

      displayArtists(filteredArtists);
    }

    document.getElementById('search').addEventListener('input', searchAndFilterArtists);
    document.getElementById('tag-filter').addEventListener('change', searchAndFilterArtists);

    populateTagFilter();
    displayArtists(data);
  </script>
</body>
</html>
